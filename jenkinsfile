pipeline {
    agent any
 
    stages {
        stage('Git_checkout') {
            steps {
               
                git 'https://github.com/somu1679/terraformsomu.git'

            }

        }
    stage('Copy files to tmp folder') {
            steps {
                script {
               if ( "1" == "1" ) {
                   sh 'rm -rf branch'
                   sh 'echo "${GIT_BRANCH}" >> branch'
                   sh '''
                   gitbranch=$(cat branch | awk -F/ '{print $2}')
                   echo ${gitbranch}
                   '''
               dir("${WORKSPACE}/somu") {
                   
                   sh 'sudo cp main.tf ${WORKSPACE}'
               }
               }else {
                   echo "files added"

        }
               }
                }
            }
    }
}
