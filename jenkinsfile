pipeline {
    agent any
 
    stages {
        stage('Setup parameters') {
            steps {
                script { 
                    properties([
                        parameters([
                            booleanParam(
                                defaultValue: false, 
                                description: 'Tik the box if you start the testing', 
                                name: 'OWASP_testing'),
                            choice(
                                choices: ['Baseline', 'Fullscan'],
                                description: 'Must and Should select the Scan Type if you tik the Testing, By default the baseline scan is selected',
                                name: 'scan_type'
                                
                            )
                            ])
                            ])
                            }
                            }
                            }
       stage('Testing stage') {
            steps {
            script {
               if (params.OWASP_testing == true) {
               echo params.scan_type
               }
               }
               }

        }
    stage('Copy files to tmp folder') {
            steps {
                script {
               if ( "1" == "1" ) {
                   sh '''
                   rm -rf branch
                   echo "${GIT_BRANCH}" >> branch
                   gitbranch=$(cat branch | awk -F/ '{print $2}')
                   echo ${gitbranch}
                   '''
               dir("${WORKSPACE}/somu") {
                   
                   sh 'sudo cp main.tf ${WORKSPACE}'
               }
               }else {
                   echo "files added"

        }
               }
                }
            }
    }
}
